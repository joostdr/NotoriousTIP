<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous"/>

    <!-- Latest compiled and minified JavaScript -->
    <script src="http://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"/>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <link href="../static/css/styles.css"
          th:href="@{/css/styles.css}" rel="stylesheet"/>
</head>
<body>
<section id="login">
    <div class="container">
        <div class="jumbotron">
            <form th:action="@{/logout}" method="post">
                <input type="submit" value="Sign Out"/>
            </form>
            <div class="row">
                <div class="col-md-2"><h2>Information</h2></div>
            </div>
            <div class="row">
                <div class="col-md-2"><b>Charge</b></div>
                <div class="col-md-2">80%</div>
            </div>
            <div class="row">
                <div class="col-md-2"><b>Status</b></div>
                <div class="col-md-2" id = "ajaxResult">OFF</div>
            </div>
            <div class="row">
                <div class="col-md-2"><b>Time on</b></div>
                <div class="col-md-2">10h 2m</div>
            </div>
            <div class="row">
                <div class="col-md-12 pull-center"><input type="checkbox" id="ayy" data-toggle="toggle"
                                                          data-width="100"/></div>
            </div>
            <div class="col-md-12 pull-center" id = "loading" style="display: none;"><p>Loading</p></div>
            <div class="col-md-12 pull-center" id = "ajaxError"></div>
            <!--<img th:href="@{../assets/loading.gif}"> </img>-->
        </div>
    </div>
</section>
</body>

<script>

    /*$(document).ajaxStart(function() {
        $("#loading").show();
        console.log("SHOW");
    });

    $(document).ajaxStop(function() {
        $("#loading").hide();
        console.log("HIDE");
    });*/

    $(function () { //function which handles the on/off button
        $('#ayy').change(function () {
            if($(this).prop('checked')){ //if ON > do POST request to Java controller which makes HTTP calls to the vibrator
                $("#loading").show();
                $.ajax({
                    url: "command/on",
                }).done(function(data){
                    $("#loading").hide();
                    $("#ajaxError").text(data);
                    /*switch(data){
                        case "200": $("#ajaxResult").text("ON");
                            break;
                        case "403": $("#ajaxError").text("Something went wrong");
                            break;
                    }*/   //return response code
                });
            }
            else{ //if OFF > do same as above
                $("#loading").show();
                $.ajax({
                    url: "command/off",
                }).done(function(data){
                    $("#loading").hide();//alert(data);
                    $("#ajaxError").text(data);
                    /*switch(data){
                        case "200": $("#ajaxResult").text("OFF");
                            break;
                        case "403": $("#ajaxError").text("Something went wrong");
                            break;
                    }*/
                });
            }
        })
    })
</script>
</html>